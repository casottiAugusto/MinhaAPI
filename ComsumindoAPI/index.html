<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loja de Games </title>
</head>
<hr>
<h4>Loja de Games</h4>
<ul id="games"></ul>


<body>
  <hr>
  <h4>Novo Game</h4>
  <input type="text" name="title" id="title" placeholder="Titulo"><br>
  <input type="text" name="estudio" id="estudio" placeholder="Plataormas"><br>
  <input type="text" name="description" id="description" placeholder="Gênero"><br>
  <input type="text" name="ano" id="ano" placeholder="Ano"><br>
  <button type="button" onclick="creategame()">Criar</button>

</body>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js">

  
</script>
<script>

  baseUrl="http://127.0.0.1:8000";
  function creategame() 
  {
    let titleInput =document.getElementById("title");
    let estudioInput =document.getElementById("estudio");
    let descInput =document.getElementById("description");
    let anoeInput =document.getElementById("ano");
    let game={
      title:titleInput.value,
      estudio:estudioInput.value,
      description:descInput.value,
      ano:anoeInput.value
    }
    axios.post(baseUrl+"/game",game).then(response=>{
      if (response.status==200) {
        alert("Salvo com sucesso !!");
        location.reload();
        
      }

    }).catch(err=>{
      console.log(err)
    })

  }


  axios.get(baseUrl+"/games").then(resquest => {
    let game =resquest.data;
    
    let lista=document.getElementById("games");
    game.forEach(games => {
      let itens=document.createElement('li');
      itens.innerHTML=`Titulo dos games ${games.title},Ano de saiu${games.ano},Gênero ${games.description}`;
      lista.appendChild(itens);
      
    });
  }).catch(err => { console.log(err) })
</script>


</html>